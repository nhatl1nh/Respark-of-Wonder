<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="X-UA-Compatible" content="ie=edge">
            <title>Respark of Wonder</title>
            <link rel="stylesheet" href="css/style.css">
            <!--SE0-->
            <meta name="description" content="Respark of Wonder is a project to see your innerchild">
            <meta name="keywords" content="Respark of Wonder, innerchild, wonder, project, Mass Media, Mass">
            <meta name="author" content="Mass Media">
            <meta property="og:type" content="website">
            <!--Favicon-->
            <link rel="icon" href="assets/ROW.svg" type="image/x-icon">
            <link rel="shortcut icon" href="assets/ROW.svg" type="image/x-icon">
            <!-- Mobile icons -->
            <link rel="icon" href="assets/ROW.svg" type="image/svg+xml">
            <link rel="apple-touch-icon" href="assets/ROW.svg">
            <meta name="theme-color" content="#000">
    </head>
    <body>
        <div id=loading-screen  >
            <img id="loadinggif"src="assets/loading.gif" alt="Loading" />
        </div>
        <script>
            window.addEventListener('load', function() {
                document.getElementById('loading-screen').style.display = 'none';
            });
        </script>
        <div class="background"></div>
        <div class="testnha-bg" alt="testnha-bg">
            <img id="bg1" src="assets/Test/BG 1.svg" alt="testnha-bg">
            <img id="bg2" src="assets/Test/BG 1- rightbottom.svg" alt="testnha-bg">
            <img id="bg3" src="assets/Test/GIFNVAT/GIF1.gif" alt="GIF Image">
            <img id="bg4-left" src="assets/Test/gamebutton.svg" alt="testnha-bg">
            <img id="bg4-right" src="assets/Test/gamebutton.svg" alt="testnha-bg">
            <img id="bg5" src="assets/Test/RSOW sticker.png" alt="testnha-bg">
            <img id="bg6" src="assets/Test/DAIZI sticker.svg" alt="testnha-bg">
            <img id="bg7" src="assets/Test/BG 2.svg" alt="testnha-bg">
            <img id="bg8" src="assets/Test/blipping.svg" alt="testnha-bg">
            <img id="bg9" src="assets/Test/how to play.png" alt="testnha-bg">

        </div>
        <div x-data="quizApp">
            <div class="question" x-show="currentQuestion < questions.length">
                <h2 class="question_text" x-text="questions[currentQuestion].question"></h2>
                <ul>
                    <template x-for="(answer, index) in questions[currentQuestion].answers" :key="index">
                        <li>
                            <button @click="selectAnswer(index)" x-text="answer" class="answer-buttonnvat"></button>
                                    </li>
                                    </template>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
<script>
        function preloadGIFs() {
        const gifPaths = [
            'assets/Test/GIFNVAT/GIF1.gif',
            'assets/Test/GIFNVAT/GIF2.gif',
            'assets/Test/GIFNVAT/GIF3.gif',
            'assets/Test/GIFNVAT/GIF4.gif',
            'assets/Test/GIFNVAT/GIF5.gif',
            'assets/Test/GIFNVAT/GIF6.gif',
            'assets/Test/GIFNVAT/GIF7.gif'
        ];
        gifPaths.forEach(path => {
            const img = new Image();
            img.src = path;
        });
    }
    setTimeout(function() {
        if (Alpine.store('quizApp').currentQuestion >= Alpine.store('quizApp').questions.length) {
            window.location.href = `./assets/RESULT/Dreamchaser/${personality}.png`;
        }
    }, 100000); // Increased timeout to 100000ms (100 seconds)


document.addEventListener('alpine:init', () => {
    Alpine.data('quizApp', () => ({
        currentQuestion: 0,
        score: 0,
        selectedAnswers: [],
        questions: [
            { question: 'You are in a class with your friends, and it is quite sleepy. Then, your teacher suddenly ask you: Can you tell me what you believe?',
                 answers: ['Nothing is more important than you being you.', 'Knowing something is great, but knowing its true nature is even better.', 'Potentials should never be locked in.', ] },
            { question: 'Now you are having dinner with your parents. You and your father are talking about today lessons at school, and he asks you: So, to yourself, what is the greatest thing?',
                 answers: ['Find your own world.', 'To really see the truth of something.', 'Exploring the world is also exploring yourself.'] },
            { question: 'You feel tired after studying. Lying on the bed, you think of every memories in your life, and you realize that after all, you really want to', 
                answers: ['Feel happy with your life, after all the ups and downs.', 'Be a smart person who has the ability to understand this world.', 'Gain meaningful experience that leads to a meaningful life.'  ] },
            { question: 'Then, some bad memories arise. From those memories, you think that it is fearful if you are', 
                answers: ['Punished after doing something bad.', 'Stuck in situations that you do not know anything to get out.', 'A person that no one cares about.'] },
            { question: 'Good morning. Now you are having breakfast while watching TV. You see a character says that "Everyone should have their own way to assert themselves". A way for you could be?', 
                answers: ['Learning to do everything right.', 'Reflect your learning and develop a strong base of knowledge.', 'Enrich yourself through various and valuable experiences.'] },
            { question: 'You are in the class, and today, the teacher asks you: What is a bad habit to yourself that you do quite frequently?', 
                answers: ['Think of everything in a over-simple way.', 'May just think but never act.', 'Always think of exploring, but rarely consider the worth of it.'] }, 
            { question: 'Then, she asks everyone to write on the board a word about a characteristic that is precious to them. Your choice would be:', 
                answers: ['Optimism.', 'Curious', 'Adventurous.'] }       
        ],
        gradients: [
            'linear-gradient(180deg, #FF8100 0%, #FDFCFB 50%, #FF8100 100%)',
            'linear-gradient(180deg, #0095BD 0%, #FDFCFB 50%, #0095BD 100%)',
            'linear-gradient(180deg, #00D18B 0%, #FDFCFB 50%, #00D18B 100%)',
            'linear-gradient(180deg, #F20071 0%, #FDFCFB 50%, #F20071 100%)',
            'linear-gradient(180deg, #FF1380 0%, #FDFCFB 50%, #FF1380 100%)',
            'linear-gradient(180deg, #0083C2 0%, #FDFCFB 50%, #0083C2 100%)',
            'linear-gradient(180deg, #FF1380 0%, #FDFCFB 50%, #FF1380 100%)',

        ],
        gradientsb : [
        'linear-gradient(180deg, #FDFCFB 50%, #FF8100 100%)',
            'linear-gradient(180deg,  #FDFCFB 50%, #0095BD 100%)',
            'linear-gradient(180deg,  #FDFCFB 50%, #00D18B 100%)',
            'linear-gradient(180deg,  #FDFCFB 50%, #F20071 100%)',
            'linear-gradient(180deg,  #FDFCFB 50%, #FF1380 100%)',
            'linear-gradient(180deg, #FDFCFB 50%, #0083C2 100%)',
            'linear-gradient(180deg, #FDFCFB 50%, #FF1380 100%)',

        ],
        init() {
            this.selectedAnswers = Array(this.questions.length).fill(null);
            const answerButtons = document.querySelectorAll('.answer-buttonnvat');
            answerButtons.forEach(button => {
                button.style.background = this.gradientsb[this.currentQuestion];
            });
            const bodyElement = document.body;
            if (bodyElement) {
                bodyElement.style.background = this.gradients[this.currentQuestion];
            } else {
                console.error('Body element not found');
            }

            // Initialize background color of .background div with animation
            const backgroundDiv = document.querySelector('.background');
            if (backgroundDiv) {
                backgroundDiv.style.background = this.gradients[this.currentQuestion];
                backgroundDiv.style.animation = 'backgroundAnimation 10s infinite';
            } else {
                console.error('Element with class "background" not found');
            }
        },
        calculateResult() {
            let scoreA = 0;
            let scoreB = 0;
            let scoreC = 0;
            this.questions.forEach((question, index) => {
                const selectedAnswer = this.selectedAnswers[index];
                if (selectedAnswer === 0) {
                    scoreA += index < 4 ? 2 : 1;
                } else if (selectedAnswer === 1) {
                    scoreB += index < 4 ? 2 : 1;
                } else if (selectedAnswer === 2) {
                    scoreC += index < 4 ? 2 : 1;
                }
            });

            let personality;
            if (scoreA > scoreB && scoreA > scoreC) {
                personality = 'Angel';
            } else if (scoreB > scoreA && scoreB > scoreC) {
                personality = 'Witch';
            } else if (scoreC > scoreA && scoreC > scoreB) {
                personality = 'Astronaut';
            } else {
                personality = 'tie';
            }
            document.getElementById('loading-screen').style.display = 'block';

            setTimeout(() => {
                window.location.href = `./assets/RESULT/Dreamchaser/${personality}.png`;
            }, 1500);
        },
        selectAnswer(index) {
            this.selectedAnswers[this.currentQuestion] = index;
            this.currentQuestion++;
            if (this.currentQuestion >= this.questions.length) {
                this.calculateResult();
            } else {
                const bg3Element = document.getElementById('bg3');
                if (bg3Element) {
                    const answerButtons = document.querySelectorAll('.answer-buttonnvat');
                    const hoverColors = ['#FF8100', '#0095BD', '#00D18B', '#F20071', '#FF1380', '#0083C2', '#FF1380'];
                    answerButtons.forEach(button => {
                        button.style.background = this.gradientsb[this.currentQuestion];
                        button.addEventListener('mouseover', () => {
                            button.style.background = hoverColors[this.currentQuestion];
                        });
                        button.addEventListener('mouseout', () => {
                            button.style.background = this.gradientsb[this.currentQuestion];
                        });
                    });
                    bg3Element.src = `assets/Test/GIFNVAT/GIF${this.currentQuestion + 1}.gif`;
                    bg3Element.onload = function() {
                        console.log('Image loaded successfully');
                    };
                    bg3Element.onerror = function() {
                        console.error('Error loading image');
                    };
                } else {
                    console.error('Element with id "bg3" not found');
                }

                // Change background color with linear-gradient and animation
                const bodyElement = document.body;
                if (bodyElement) {
                    bodyElement.style.background = this.gradients[this.currentQuestion];
                    bodyElement.style.animation = 'backgroundAnimation 10s infinite';
                } else {
                    console.error('Body element not found');
                }

                // Change background color of .background div with animation
                const backgroundDiv = document.querySelector('.background');
                if (backgroundDiv) {
                    backgroundDiv.style.background = this.gradients[this.currentQuestion];
                    backgroundDiv.style.animation = 'backgroundAnimation 10s infinite';
                } else {
                    console.error('Element with class "background" not found');
                }
            }
        }
    }));
});
</script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
